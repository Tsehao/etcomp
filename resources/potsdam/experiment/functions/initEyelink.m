function [el, error]=initEyelink(const,visual);%% function initEyelink SpatStat1%% initialize eye tracker or run in dummy mode%edffilename = strcat(const.code,'.edf');error=0;if (Eyelink('initialize') ~= 0)    Eyelink('initializedummy');endi = Eyelink('openfile', edffilename);if i~=0	printf('Cannot create EDF file ''%s'' ', edffilename);	Eyelink( 'Shutdown');	return;end%   preamble textEyelink('command', 'add_file_preamble_text ''Recorded by SpatStat1 (Hans Trukenbrod)''');%   set up tracker configurationEyelink('command', 'calibration_type = HV9');%	set EDF file contentsEyelink('command', 'file_event_filter = LEFT,RIGHT,MESSAGE');%	set link data (used for gaze cursor)Eyelink('command', 'link_event_filter = LEFT,RIGHT,BUTTON');Eyelink('command', 'link_sample_data  = LEFT,RIGHT,GAZE,AREA');% Infos zu Experiment herausschreibenEyelink('message', 'SubjectID %s', const.code);Eyelink('message', 'MonitorSettings');Eyelink('message', 'ScreenCoords %d %d %d %d',visual.rect(1),visual.rect(2),visual.rect(3),visual.rect(4)); Eyelink('message', 'ScreenInfo1 MoFreq MoPiSi %d %d',const.MoFreq,const.MoPiSi);Eyelink('message',['ScreenInfo2 bgColor ' num2str(const.bgCol,'%.3f ')]);el=EyelinkInitDefaults(visual.main);    % if we do this after we have opened a graphics window                						% this window is used to set defaults% modify a few of the default settingsel.backgroundcolour = const.bgCol*256;		% Hintergrundfarbe bei Kalibrierungen, ...el.foregroundcolour = [0 0 0];           	% Vordergrundfarbe bei Kalibrierungen, ...el.calibrationfailedsound = 0;              % Ausschalten der Sounds bei erfolgter Kalibrierungel.calibrationsuccesssound = 0;             % Ausschalten der Sounds bei erfolgter Kalibrierung[el.beep,samplingRate] = MakeBeep(75,.5,[1000]);status = Eyelink('isconnected');switch statuscase -1fprintf( 'Eyelink in dummymode.\n\n');case 0fprintf( 'Eyelink not connected.\n\n');case 1fprintf( 'Eyelink connected.\n\n');endif Eyelink('isconnected')==el.notconnected	Eyelink('closefile');	Eyelink('shutdown');	SCREEN('closeall');	return;enderror=el.ABORT_EXPT;